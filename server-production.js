!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=44)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("styled-components")},function(e,t,n){"use strict";n.d(t,"v",function(){return r}),n.d(t,"u",function(){return o}),n.d(t,"w",function(){return a}),n.d(t,"o",function(){return i}),n.d(t,"q",function(){return c}),n.d(t,"p",function(){return l}),n.d(t,"l",function(){return u}),n.d(t,"n",function(){return s}),n.d(t,"m",function(){return p}),n.d(t,"e",function(){return f}),n.d(t,"i",function(){return d}),n.d(t,"k",function(){return y}),n.d(t,"j",function(){return m}),n.d(t,"J",function(){return h}),n.d(t,"L",function(){return g}),n.d(t,"K",function(){return b}),n.d(t,"a",function(){return v}),n.d(t,"d",function(){return k}),n.d(t,"c",function(){return w}),n.d(t,"b",function(){return _}),n.d(t,"f",function(){return E}),n.d(t,"h",function(){return O}),n.d(t,"g",function(){return S}),n.d(t,"G",function(){return x}),n.d(t,"I",function(){return j}),n.d(t,"H",function(){return C}),n.d(t,"r",function(){return P}),n.d(t,"t",function(){return I}),n.d(t,"s",function(){return T}),n.d(t,"D",function(){return A}),n.d(t,"F",function(){return N}),n.d(t,"E",function(){return R}),n.d(t,"A",function(){return L}),n.d(t,"C",function(){return D}),n.d(t,"B",function(){return U}),n.d(t,"x",function(){return M}),n.d(t,"z",function(){return F}),n.d(t,"y",function(){return q}),n.d(t,"M",function(){return z});var r="LOG_IN_SUCESS",o="LOG_IN_FAILURE",a="LOG_OUT",i="FETCH_USER_ID",c="FETCH_USER_ID_SUCCESS",l="FETCH_USER_ID_FAILURE",u="FETCH_SEARCH_RESULTS",s="FETCH_SEARCH_RESULTS_SUCCESS",p="FETCH_SEARCH_RESULTS_FAILURE",f="CLEAR_RESULTS",d="FETCH_PLAYLIST_FROM_DB",y="FETCH_PLAYLIST_FROM_DB_SUCCESS",m="FETCH_PLAYLIST_FROM_DB_FAILURE",h="UPDATE_TRACK",g="UPDATE_TRACK_SUCCESS",b="UPDATE_TRACK_FAILURE",v="ADD_TO_PLAYLIST",k="ADD_TO_PLAYLIST_SUCCESS",w="ADD_TO_PLAYLIST_FAILURE",_="ADD_TO_PLAYLIST_DISALLOWED",E="REMOVE_TRACK",O="REMOVE_TRACK_SUCCESS",S="REMOVE_TRACK_FAILURE",x="UPDATE_CURRENT_TRACK",j="UPDATE_CURRENT_TRACK_SUCCESS",C="UPDATE_CURRENT_TRACK_FAILURE",P="GET_CURRENTLY_PLAYING",I="GET_CURRENTLY_PLAYING_SUCCESS",T="GET_CURRENTLY_PLAYING_FAILURE",A="START_SESSION",N="START_SESSION_SUCCESS",R="START_SESSION_FAILURE",L="RESUME_PLAYBACK",D="RESUME_PLAYBACK_SUCCESS",U="RESUME_PLAYBACK_FAILURE",M="PAUSE_PLAYBACK",F="PAUSE_PLAYBACK_SUCCESS",q="PAUSE_PLAYBACK_FAILURE",z=[g,k,N,D,F,O]},function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"d",function(){return c}),n.d(t,"e",function(){return u}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return p});var r=n(1),o=n.n(r);function a(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  width: 95%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]);return a=function(){return e},e}var i={spotifyGreen:"#1DB954",darkGreen:"#106c31",spotifyBlack:"#191414",spotifyWhite:"#FFFFFF",grey:"#333",black:"#191414",primaryDark:"#212121",primaryLight:"#424242",primaryLightRGBA:"66, 66, 66",secondaryDark:"#bdbdbd",secondaryLight:"#e0e0e0"},c={title:"Righteous, cursive;",font1:"Lucida Sans Unicode, Lucida Grande, sans-serif;"},l={desktop:992,tablet:768,phone:691},u=Object.keys(l).reduce(function(e,t){return e[t]=function(){return Object(r.css)(["@media (max-width:","em){","}"],l[t]/16,r.css.apply(void 0,arguments))},e},{}),s=o.a.div.withConfig({displayName:"globalStyles__Container",componentId:"sc-1c7q87i-0"})(["width:70%;",""],u.desktop(a())),p=o.a.button.withConfig({displayName:"globalStyles__DefaultButton",componentId:"sc-1c7q87i-1"})(["background:none;color:inherit;border:none;padding:0;font:inherit;cursor:pointer;outline:inherit;"])},function(e,t,n){"use strict";var r=n(2),o=function(e){return{type:r.v,payload:e}},a=function(e){return{type:r.u,payload:e}},i=function(){return{type:r.w}},c=n(7),l=n.n(c),u=function(e){return l.a.create({baseURL:"https://api.spotify.com/v1/",timeout:1e3,headers:{Authorization:"Bearer ".concat(e)}})},s="1SiJYX0g4Kt99oskKqeRtx",p=function(e,t){return l.a.patch("/api/v1/playlist/tracks/".concat(e),{update:t})},f=function(e,t){return e.length+t.length},d=function(e,t,n){if(0===e.length)return 0;var r=e.findIndex(function(e){return e.votes<t.votes||e.updatedAt>t.updatedAt});return-1===r&&(r=e.length),-1===n&&(r-=1),r};function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){m(e,t,n[t])})}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e,t,n){return function(o,a){var i=a(),c=i.appUser.userId,l=i.playlist.tracks,m=l[t];if(1===n){if(m.upVoters&&3===m.upVoters[c])return o({type:"UPVOTE_LIMIT_EXCEEDED",payload:t})}else if(m.downVoters&&2===m.downVoters[c])return o({type:"DOWNVOTE_LIMIT_EXCEEDED",payload:t});var h=y({},m,{votes:m.votes+n,updatedAt:(new Date).toISOString(),upVoters:y({},m.upVoters),downVoters:y({},m.downVoters)});1===n?h.upVoters[c]=(h.upVoters[c]||0)+1:h.downVoters[c]=(h.downVoters[c]||0)+1;var g=d(l,h,n),b=function(r){if(g===t)return p(e,{$inc:{votes:n},$set:{updatedAt:h.updatedAt,upVoters:h.upVoters,downVoters:h.downVoters}});var o=a().playlist,i=o.removedPlaylist,c=o.lockedTrack,l=f(i,c);return function(e,t,n,r,o){var a=n+e,i=n+t+1;return 1===r&&(i-=1),u(o).put("playlists/".concat(s,"/tracks"),{range_start:a,insert_before:i})}(t,g,l,n,r).then(function(t){return p(e,{$inc:{votes:n},$set:{updatedAt:h.updatedAt}})})};return o({types:[r.J,r.L,r.K],requiresAuth:!0,callAPI:function(e){return b(e)},payload:{position:t,newPosition:g,track:h}})}},g=function(e,t,n,o){return function(a,i){var c=i().playlist,p=c.tracks,y=c.removedPlaylist,m=c.lockedTrack;if(p.some(function(t){return t.uri===e}))return a({type:r.b,payload:o});var h=(new Date).toISOString(),g={artist:n,name:t,votes:0,uri:e,updatedAt:h},b=d(p,g,1),v=f(y,m),k=function(r){return function(e,t,n){return u(n).post("playlists/".concat(s,"/tracks?uris=").concat(e,"&position=").concat(t))}(e,b+v,r).then(function(r){return function(e,t,n,r){return l.a.post("/api/v1/playlist/tracks",{uri:e,name:t,artist:n,updatedAt:r})}(e,t,n,h)})};return a({types:[r.a,r.d,r.c],requiresAuth:!0,callAPI:function(e){return k(e)},payload:{position:b,positionInSearch:o,track:g}})}},b=function(e,t){return function(n,o){var a=function(t){return function(e,t){return u(t).delete("playlists/".concat(s,"/tracks"),{data:{tracks:[{uri:e}]}})}(e,t).then(function(t){return function(e){return l.a.delete("/api/v1/playlist/tracks/".concat(e))}(e)})};return n({types:[r.f,r.h,r.g],requiresAuth:!0,callAPI:function(e){return a(e)},payload:{position:t,uri:e}})}},v=function(){return function(e,t){var n=t(),o=n.playback.progress_ms,a=n.playlist,i=a.removedPlaylist,c=a.lockedTrack,l=a.tracks,p=i.length;n.session.sessionStarted;e({types:[r.A,r.C,r.B],callAPI:function(t){return function(e,t,n){return u(n).put("me/player/play",{context_uri:"spotify:playlist:".concat(s),offset:{position:t},position_ms:e})}(o,parseInt(p,10),t).then(function(t){0===c.length&&l.length>0&&e(S())})},requiresAuth:!0})}},k=function(){return{types:[r.x,r.z,r.y],callAPI:function(e){return u(e).put("me/player/pause")},requiresAuth:!0}},w=function(){return{types:[r.r,r.t,r.s],callAPI:function(e){return u(e).get("me/player/currently-playing")},requiresAuth:!0}},_=function(){return function(e,t){var n=t(),o=n.playback.currentTrack.uri,a=n.playlist.lockedTrack[0].uri;e({types:[r.G,r.I,r.H],callAPI:function(){return function(e,t){return Promise.all([p(e,{$set:{removed:!0}}),p(t,{$set:{locked:!0}})])}(a,o)}})}},E=function(){return function(e){e({types:[r.i,r.k,r.j],callAPI:function(){return l.a.get("http://localhost:5000/api/v1/playlist/tracks")}})}},O=function(e){return function(t,n){return t(e?function(e){return{types:[r.l,r.n,r.m],callAPI:function(t){return u(t).get("search".concat(e))},requiresAuth:!0}}("?q="+(e.replace(" ","%20")+"*")+"&type=album,track,artist,playlist"):{type:r.e})}},S=function(){return function(e,t){var n=t().playlist.tracks;e({types:[r.D,r.F,r.E],callAPI:function(){return l.a.patch("/api/v1/playlist/tracks/".concat(n[0].uri),{update:{$set:{locked:!0}}})}})}},x=(n(10),function(){return{types:[r.o,r.q,r.p],shouldCallAPI:function(e){return!e.user.userId},callAPI:function(e){return u(e).get("me")},requiresAuth:!0}}),j=function(e){return{type:"ASSIGN_APP_USER",payload:e}};n.d(t,"h",function(){return o}),n.d(t,"g",function(){return a}),n.d(t,"i",function(){return i}),n.d(t,"o",function(){return h}),n.d(t,"a",function(){return g}),n.d(t,"k",function(){return b}),n.d(t,"l",function(){return v}),n.d(t,"j",function(){return k}),n.d(t,"f",function(){return w}),n.d(t,"n",function(){return _}),n.d(t,"c",function(){return E}),n.d(t,"d",function(){return O}),n.d(t,"m",function(){return S}),n.d(t,"e",function(){return x}),n.d(t,"b",function(){return j})},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("react-redux")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("lodash")},function(e,t){e.exports=require("redux")},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(2);function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){a(e,t,n[t])})}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var c=function(e){var t=e.dispatch,n=e.getState;return function(e){return function(a){var c=a.types,l=a.callAPI,u=a.shouldCallAPI,s=void 0===u?function(){return!0}:u,p=a.payload,f=void 0===p?{}:p,d=a.requiresAuth,y=void 0!==d&&d;if(!c)return e(a);if(!Array.isArray(c)||3!==c.length||!c.every(function(e){return"string"==typeof e}))throw new Error("Expected an array of three string types.");if("function"!=typeof l)throw new Error("Expected callAPI to be a function.");if(s(n())){var m,h=i(c,3),g=h[0],b=h[1],v=h[2];return y&&(m=n().auth.token),t({type:g,payload:o({},f,{response:{loading:!0}})}),l(m).then(function(e){return r.M.includes(b)?t({payload:o({},f,{response:e}),type:b,handler:"WS"}):t({payload:o({},f,{response:e}),type:b})}).catch(function(e){return t({payload:o({},f,{error:e}),type:v})})}}}}},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(1),i=n.n(a).a.div.withConfig({displayName:"ErrorIndicator__Wrapper",componentId:"sc-11pw95q-0"})(["height:200px;display:flex;align-items:center;justify-content:center;& > p{text-align:center;}"]);t.a=function(e){var t=e.message;return o.a.createElement(i,null,o.a.createElement("p",null,"Oops, something went wrong...",o.a.createElement("br",null),t||"Try logging in again."))}},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(6),i=n(4),c=(n(17),n(11)),l=n(1),u=n.n(l),s=n(3),p=n(15);function f(){var e=y(["height: 24px;width: 24px;"]);return f=function(){return e},e}function d(){var e=y(["font-size: 18px;"]);return d=function(){return e},e}function y(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var m=u.a.div.withConfig({displayName:"styles__Wrapper",componentId:"sc-1rz1gdq-0"})(["display:flex;flex-direction:row;justify-content:center;align-items:center;height:100%;width:100%;"]),h=u.a.p.withConfig({displayName:"styles__VotesText",componentId:"sc-1rz1gdq-1"})(["padding:0 10px;width:20px;text-align:center;color:white;font-family:",";",""],s.d.font1,s.e.tablet(d())),g=u.a.img.withConfig({displayName:"styles__Icon",componentId:"sc-1rz1gdq-2"})(["height:20px;width:20px;",""],s.e.tablet(f())),b=function(e){var t=e.position,n=e.uri,r=e.votes,a=e.handleUpVote,i=e.handleDownVote,c=e.removeTrack,l=e.minusImg,u=e.plusImg,p=function(e,t,n,o){r+o===-5?c(e,t):n(e,t,o)};return o.a.createElement(m,null,o.a.createElement(s.b,{onClick:function(){return p(n,t,i,-1)}},o.a.createElement(g,{src:l})),o.a.createElement(h,null,r),o.a.createElement(s.b,{onClick:function(){return p(n,t,a,1)}},o.a.createElement(g,{src:u})))},v=n(16),k=u.a.table.withConfig({displayName:"Tracks__Table",componentId:"sc-1j1q0ns-0"})(["width:100%;"]),w=u.a.div.withConfig({displayName:"Tracks__VoteDetailsWrapper",componentId:"sc-1j1q0ns-1"})(["height:30px;width:80px;"]),_=function(e){var t=e.playlist,n=e.trackError,r=e.updateTrackNumOfVotes,a=e.removeTrack;return o.a.createElement(k,null,o.a.createElement("tbody",null,t.map(function(e,t){var i,c=e.artist,l=e.name,u=e.votes,s=e.uri,f=e.updatedAt;return n&&n.position===t&&console.log("==track error==",n.error.displayMessage),o.a.createElement(o.a.Fragment,{key:"".concat(s,"-").concat(t)},o.a.createElement(p.a,{name:l,artist:c,isLocked:!1,shouldFocus:f>(i=new Date,i.setSeconds(i.getSeconds()-1),i.toISOString())},o.a.createElement(w,null,o.a.createElement(b,{position:t,uri:s,votes:u,handleUpVote:r,handleDownVote:r,removeTrack:a,minusImg:"images/white-minus.svg",plusImg:"images/white-plus.svg"}))),n&&n.position===t&&o.a.createElement(v.a,{text:n.error.displayMessage}))})))},E=u.a.div.withConfig({displayName:"Playlist__Heading",componentId:"i3s6h6-0"})(["text-align:left;"]),O=u.a.img.withConfig({displayName:"Playlist__PlaybackIcon",componentId:"i3s6h6-1"})(["height:40px;width:40px;padding:16px;"]),S=function(e){var t=e.playback,n=e.playlist,r=t.pausePlayback,a=t.resumePlayback,i=t.playing,c=n.tracks,l=n.lockedTrack,u=n.trackError,p=n.updateTrackVotes,f=n.removeTrack;return o.a.createElement(s.a,null,o.a.createElement(E,null,o.a.createElement(s.b,{onClick:i?r:a},o.a.createElement(O,{src:"images/".concat(i?"pause":"play","-circle-regular.svg")})),o.a.createElement("h2",null,"Party Playlist")),l.length>0&&o.a.createElement(LockedTrack,{track:l[0],playing:i}),o.a.createElement(_,{playlist:c,trackError:u,updateTrackNumOfVotes:p,removeTrack:f}))};function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),C(this,P(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,o.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.playlist,r=t.fetchPlaylist;0===n.tracks.length&&r(),this.timer=setInterval(function(){return e.getCurrentlyPlaying()},1e3)}},{key:"getCurrentlyPlaying",value:function(){var e=this.props,t=e.session,n=e.getCurrentlyPlayingTrack;t.sessionStarted&&n()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.currentTrack,r=t.updateCurrentTrack;t.session.sessionStarted&&n.uri&&e.currentTrack.uri!==n.uri&&r()}},{key:"render",value:function(){var e=this.props,t=e.playlist,n=e.playing,r=e.resumePlayback,a=e.pausePlayback,i=e.playbackError,l=e.session,u=e.updateTrackNumOfVotes,s=e.removeTrack,p=t.tracks,f=t.lockedTrack,d=t.error,y=t.trackError,m=l.error,h=d||i||m;if(h)return o.a.createElement(c.a,{message:h.displayMessage});if(0===p.length&&0===f.length)return null;var g={playing:n,pausePlayback:a,resumePlayback:r},b={tracks:p,lockedTrack:f,trackError:y,updateTrackVotes:u,removeTrack:s};return o.a.createElement(S,{playlist:b,playback:g})}}])&&j(n.prototype,r),a&&j(n,a),t}();T.serverFetch=i.c;t.a=Object(a.connect)(function(e){return{playlist:e.playlist,playing:e.playback.playing,session:e.session,currentTrack:e.playback.currentTrack,playbackError:e.playback.error}},{fetchPlaylist:i.c,removeTrack:i.k,updateTrackNumOfVotes:i.o,resumePlayback:i.l,pausePlayback:i.j,getCurrentlyPlayingTrack:i.f,startSession:i.m,updateCurrentTrack:i.n})(T)},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(6),i=n(4),c=n(1),l=n.n(c),u=n(3),s=n(5);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=l.a.div.withConfig({displayName:"MobileNav__NavWrapper",componentId:"sc-12282uj-0"})(["background-color:",";font-family:",";position:relative;margin:0px;width:100%;height:50px;z-index:1;"],u.c.black,u.d.font1),b=l.a.div.withConfig({displayName:"MobileNav__Chevron",componentId:"sc-12282uj-1"})(["transform:",";transition:all 0.5s;"],function(e){return e.shouldRotate&&"rotate(180deg)"}),v=l.a.div.withConfig({displayName:"MobileNav__DropDownContent",componentId:"sc-12282uj-2"})(["display:",";background-color:",";opacity:0.8;"],function(e){return e.open?"block !important;`":"none"},u.c.secondaryLight),k=l.a.div.withConfig({displayName:"MobileNav__LinkWrapper",componentId:"sc-12282uj-3"})(["& > a{padding:14px 16px;text-decoration:none;font-size:17px;display:block;color:",";&:hover{background-color:",";color:",";}}"],u.c.spotifyWhite,u.c.secondaryLight,u.c.black),w=l.a.div.withConfig({displayName:"MobileNav__NavLinks",componentId:"sc-12282uj-4"})(["display:",";background-color:",";"],function(e){return e.open?"block":"none"},u.c.primaryLight),_=l.a.a.withConfig({displayName:"MobileNav__Burger",componentId:"sc-12282uj-5"})(["height:50px;width:50px;display:block;position:absolute;right:0;top:0;"]),E=l.a.div.withConfig({displayName:"MobileNav__TopLinkWrapper",componentId:"sc-12282uj-6"})(["height:50px;"]),O=l.a.img.withConfig({displayName:"MobileNav__HomeIconLink",componentId:"sc-12282uj-7"})(["height:40px;padding:4px;"]),S=l.a.a.withConfig({displayName:"MobileNav__AccountDropDown",componentId:"sc-12282uj-8"})(["display:flex !important;justify-content:space-between;"]),x=l.a.a.withConfig({displayName:"MobileNav__ExternalLink",componentId:"sc-12282uj-9"})(["color:black !important;&:active,&:hover{background-color:"," !important;}"],u.c.secondaryDark),j=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return r=this,a=(e=d(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==p(a)&&"function"!=typeof a?y(r):a,h(y(n),"state",{menuOpen:!1,accountAccordianOpen:!1}),h(y(n),"handleMenuOpenClick",function(){n.setState({menuOpen:!n.state.menuOpen})}),h(y(n),"handleAccordianClick",function(){n.setState({accountAccordianOpen:!n.state.accountAccordianOpen})}),h(y(n),"renderProtectedRoutes",function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(k,null,o.a.createElement(s.Link,{to:"/playlist"},"Playlist")),o.a.createElement(k,null,o.a.createElement(s.Link,{to:"/search"},"Search")))}),h(y(n),"renderAccountDropDown",function(e){return o.a.createElement("div",{onClick:n.handleAccordianClick},o.a.createElement(k,null,o.a.createElement(S,{href:"#"},o.a.createElement("div",null,"Account"),o.a.createElement(b,{shouldRotate:e},"▼"))),o.a.createElement(v,{open:e},o.a.createElement(k,null,o.a.createElement(x,{href:"/change-user"},"Change user")),o.a.createElement(k,null,o.a.createElement(x,{href:"/log-out"},"Log out"))))}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.token,t=this.state,n=t.menuOpen,r=t.accountAccordianOpen;return o.a.createElement(g,null,o.a.createElement(E,null,o.a.createElement(s.Link,{to:"/"},o.a.createElement(O,{src:"images/jukebox.svg"}))),o.a.createElement(w,{open:n},e&&this.renderProtectedRoutes(),e?this.renderAccountDropDown(r):o.a.createElement(k,null,o.a.createElement("a",{href:"/login"},"Log in"))),o.a.createElement(_,{onClick:this.handleMenuOpenClick},o.a.createElement("img",{src:"images/hamburger.svg"})))}}])&&f(n.prototype,r),a&&f(n,a),t}(),C=l.a.div.withConfig({displayName:"DesktopNav__Container",componentId:"nzdi04-0"})(["margin:0px;width:100%;height:50px;border-bottom:1px solid #bbb;text-align:center;background-color:",";font-family:'Lucida Sans Unicode',Lucida Grande,sans-serif;"],u.c.spotifyBlack),P=l.a.div.withConfig({displayName:"DesktopNav__ContentWrapper",componentId:"nzdi04-1"})(["width:80vw;display:inline-block;height:100%;font-size:16px;color:",";"],u.c.spotifyWhite),I=l.a.ul.withConfig({displayName:"DesktopNav__List",componentId:"nzdi04-2"})(["list-style-type:none;margin:0;padding:0;height:100%;"]),T=l.a.li.withConfig({displayName:"DesktopNav__ListItem",componentId:"nzdi04-3"})(["float:left;height:100%;position:relative;background:linear-gradient( to top,"," 50%,"," 50% );background-size:200% 200%;background-position:top;transition:background 1s ease;& > a{display:block;color:",";text-align:center;padding:16px 12px;text-decoration:none;}&:hover{background-color:",";border-bottom:solid "," 1px;background-position:bottom;}& > a:active{color:",";}"],u.c.primaryDark,u.c.spotifyBlack,u.c.spotifyWhite,u.c.primaryDark,u.c.primaryDark,u.c.secondaryLight),A=l.a.div.withConfig({displayName:"DesktopNav__DropDownContent",componentId:"nzdi04-4"})(["display:none;position:absolute;width:130px;text-align:left;z-index:1;"]),N=l()(T).withConfig({displayName:"DesktopNav__ListItemDropDown",componentId:"nzdi04-5"})(["position:relative;&:hover{","{display:block;}}"],A),R=l.a.a.withConfig({displayName:"DesktopNav__ExternalLink",componentId:"nzdi04-6"})(["color:inherit;padding:12px 16px;text-decoration:none;display:block;background-color:",";&:hover{background-color:",";}"],u.c.spotifyBlack,u.c.primaryDark),L=l.a.img.withConfig({displayName:"DesktopNav__Logo",componentId:"nzdi04-7"})(["height:20px;width:20px;float:right;"]),D=function(e){var t=e.token,n=e.userId;return o.a.createElement(C,null,o.a.createElement(P,null,o.a.createElement(I,null,o.a.createElement(T,null,o.a.createElement(s.Link,{to:"/"},"Home")),t&&o.a.createElement(o.a.Fragment,null,o.a.createElement(T,null,o.a.createElement(s.Link,{to:"/playlist"},"Test Playlist")),o.a.createElement(T,null,o.a.createElement(s.Link,{to:"/search"},"Search"))),o.a.createElement(N,{style:{float:"right"}},t?o.a.createElement(o.a.Fragment,null,o.a.createElement(s.Link,{to:"#"},n||"Account"),o.a.createElement(A,null,o.a.createElement(R,{href:"/change-user"},"Change user"),o.a.createElement(R,{href:"/log-out"},"Log out"))):o.a.createElement(o.a.Fragment,null,o.a.createElement("a",{href:"/login"},"Log In ",o.a.createElement(L,{src:"/images/Spotify_Icon_RGB_Green.png"})))))))};function U(){var e=F(["display: block;"]);return U=function(){return e},e}function M(){var e=F(["display: none;"]);return M=function(){return e},e}function F(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var q=l.a.div.withConfig({displayName:"Nav__DesktopNavContainer",componentId:"sc-1p7aaqx-0"})(["display:block;",""],u.e.tablet(M())),z=l.a.div.withConfig({displayName:"Nav__MobileNavContainer",componentId:"sc-1p7aaqx-1"})(["display:none;",""],u.e.tablet(U())),B=function(e){var t=e.token,n=e.userId;return o.a.createElement(o.a.Fragment,null,o.a.createElement(q,null,o.a.createElement(D,{token:t,userId:n})),o.a.createElement(z,null,o.a.createElement(j,{token:t})))};function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var K=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Y(this,G(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.token,n=e.userId;return o.a.createElement(B,{token:t,userId:n})}}])&&W(n.prototype,r),a&&W(n,a),t}();K.serverFetch=i.e;t.a=Object(a.connect)(function(e){return{token:e.auth.token,userId:e.user.userId}},{fetchUser:i.e})(K)},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(1),i=n.n(a),c=n(3);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["width: 70vw;"]);return y=function(){return e},e}var m=i.a.div.withConfig({displayName:"SearchBar__Wrapper",componentId:"a0kj9b-0"})(["text-align:center;margin:8px 0;"]),h=i.a.input.withConfig({displayName:"SearchBar__SearchInput",componentId:"a0kj9b-1"})([""," width:50vw;height:24px;border:1px solid grey;border-radius:24px;box-shadow:white;box-shadow:0px 8px 16px 0px rgba(0,0,0,1);outline:none;padding:8px 16px 8px 48px;font-size:16px;color:white;background:url('images/search.svg') top left no-repeat;&:focus-within{background-color:",";color:",";}"],c.e.phone(y()),c.c.secondaryDark,c.c.black),g=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=s(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==l(o)&&"function"!=typeof o?p(r):o,d(p(n),"state",{searchTerm:""}),d(p(n),"handleSearchTermChange",function(e){n.setState({searchTerm:e.target.value}),n.props.onSubmit(e.target.value)}),d(p(n),"handleFormSubmit",function(e){e.preventDefault(),n.props.onSubmit(n.state.searchTerm)}),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return o.a.createElement(m,null,o.a.createElement("form",{onSubmit:this.handleFormSubmit},o.a.createElement(h,{type:"text",value:this.state.searchTerm,onChange:this.handleSearchTermChange,placeholder:"search by artist, song or album"})))}}])&&u(n.prototype,a),i&&u(n,i),t}(),b=n(15),v=i()(c.b).withConfig({displayName:"AddButton__Button",componentId:"lef8bp-0"})(["font-size:24px;height:20px;& > p{line-height:0;padding:0;margin:0;}&:active > p{transform:scale(0.8);}&:after > p{transform:scale(1);}"]),k=function(e){var t=e.handleClick,n=e.uri,r=e.name,a=e.artist;return o.a.createElement(v,{onClick:function(){return t(n,r,a)}},o.a.createElement("p",null," + "))},w=n(16),_=Object(a.keyframes)(["0%{top:6px;height:51px;}50%,100%{top:19px;height:26px;}"]),E=i.a.div.withConfig({displayName:"LoadingIndicator__LoadingBarWrapper",componentId:"sc-1viay8g-0"})(["display:inline-block;position:relative;width:64px;height:64px;"]),O=i.a.div.withConfig({displayName:"LoadingIndicator__LoadingBar",componentId:"sc-1viay8g-1"})(["display:inline-block;position:absolute;left:6px;width:13px;background:#fff;animation:"," 1.2s cubic-bezier(0,0.5,0.5,1) infinite;&:nth-child(1){left:6px;animation-delay:-0.24s;}&:nth-child(2){left:26px;animation-delay:-0.12s;}&:nth-child(3){left:45px;animation-delay:0;}"],_),S=i.a.div.withConfig({displayName:"LoadingIndicator__Container",componentId:"sc-1viay8g-2"})(["height:200px;display:flex;align-items:center;justify-content:center;"]),x=function(){return o.a.createElement(S,null,o.a.createElement(E,null,o.a.createElement(O,null),o.a.createElement(O,null),o.a.createElement(O,null)))},j=i.a.table.withConfig({displayName:"Search__Table",componentId:"sc-1p6ph2x-0"})(["width:100%;"]),C=i.a.div.withConfig({displayName:"Search__ButtonWrapper",componentId:"sc-1p6ph2x-1"})(["text-align:center;"]);t.a=function(e){var t=e.results,n=e.fetchSearchResults,r=e.addToPlaylist,a=e.trackError,i=e.loading;return o.a.createElement(c.a,null,o.a.createElement(g,{onSubmit:n,loading:i}),i&&0===t.length?o.a.createElement(x,null):o.a.createElement(j,null,o.a.createElement("tbody",null,t&&t.map(function(e,t){var n=e.name,i=e.artists,c=e.uri,l=e.loading,u=e.added;return l&&console.log("adding track ".concat(i[0].name," - ").concat(n)),u&&console.log("added ".concat(i[0].name," - ").concat(n)),o.a.createElement(o.a.Fragment,{key:c},o.a.createElement(b.a,{name:n,artist:i[0].name},!u&&o.a.createElement(C,null,o.a.createElement(k,{handleClick:function(){return r(c,n,i[0].name,t)},name:n,artist:i[0].name,uri:c,img:"add"}))),a&&a.position===t&&o.a.createElement(w.a,{text:a.error.displayMessage}))}))))}},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(30),i=n.n(a),c=n(1),l=n.n(c),u=n(3);function s(){var e=d(["width: 90%; padding: 0;"]);return s=function(){return e},e}function p(){var e=d(["display:none;"]);return p=function(){return e},e}function f(){var e=d(["display:table-row;"]);return f=function(){return e},e}function d(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var y=Object(c.keyframes)(["50%{color:",";}"],u.c.spotifyGreen),m=Object(c.keyframes)(["50%{color:",";}"],u.c.darkGreen),h=l.a.tr.withConfig({displayName:"styles__MobileRow",componentId:"nwdvkk-0"})(["display:none;"," height:50px;color:white;font-family:",";width:100%;animation:"," 1s ease-in-out;"],u.e.tablet(f()),u.d.font1,function(e){return e.shouldFocus&&y}),g=l.a.tr.withConfig({displayName:"styles__DesktopRow",componentId:"nwdvkk-1"})(["display:table-row;"," color:white;font-family:",";height:50px;width:100%;animation:"," 1s ease-in-out;"],u.e.tablet(p()),u.d.font1,function(e){return e.shouldFocus&&y}),b=l.a.td.withConfig({displayName:"styles__Cell",componentId:"nwdvkk-2"})([""," padding:0 12px 0 12px;border-bottom:",";line-height:1;"],u.e.tablet(s()),function(e){return e.hasBorder&&"solid 1px #424242"}),v=l()(b).withConfig({displayName:"styles__NameCell",componentId:"nwdvkk-3"})(["width:55%;"]),k=l()(b).withConfig({displayName:"styles__ArtistCell",componentId:"nwdvkk-4"})(["width:35%;"]),w=l()(b).withConfig({displayName:"styles__CTACell",componentId:"nwdvkk-5"})(["width:10%;"]),_=l.a.p.withConfig({displayName:"styles__MobileName",componentId:"nwdvkk-6"})(["line-height:0;margin:0;padding:0;"]),E=l.a.p.withConfig({displayName:"styles__MobileArtist",componentId:"nwdvkk-7"})(["line-height:0;margin:0;padding:0;color:grey;animation:"," 1s ease-in-out;"],function(e){return e.shouldFocus&&m});t.a=function(e){var t=e.name,n=e.artist,r=e.children,a=e.isLocked,c=e.shouldFocus,l=function(e){return o.a.createElement(i.a,{lines:1,ellipsis:"..."},e)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(h,{shouldFocus:c},o.a.createElement(b,{hasBorder:!a},o.a.createElement(_,null,l(t)),o.a.createElement("br",null),o.a.createElement(E,{shouldFocus:c},l(n))),o.a.createElement(b,{hasBorder:!a},r)),o.a.createElement(g,{shouldFocus:c},o.a.createElement(v,{hasBorder:!a},l(t)),o.a.createElement(k,{hasBorder:!a},l(n)),o.a.createElement(w,{hasBorder:!a},r)))}},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(1),i=n.n(a);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(){var e,n,r,o,a,i,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var p=arguments.length,f=new Array(p),d=0;d<p;d++)f[d]=arguments[d];return r=this,n=!(o=(e=u(t)).call.apply(e,[this].concat(f)))||"object"!==c(o)&&"function"!=typeof o?s(r):o,a=s(n),l={visible:!0},(i="state")in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,o.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){this.setTimer()}},{key:"componentWillReceiveProps",value:function(e){e.children!==this.props.children&&(this.setTimer(),this.setState({visible:!0}))}},{key:"setTimer",value:function(){var e=this;null!=this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){e.setState({visible:!1}),e.timer=null},this.props.delay)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"render",value:function(){return this.state.visible?this.props.children:o.a.createElement("span",null)}}])&&l(n.prototype,r),a&&l(n,a),t}(),d=i.a.p.withConfig({displayName:"TrackError__ErrorMessage",componentId:"jb2ohp-0"})(["color:lightgrey;line-height:0;padding:0;margin:0;font-size:14px;"]);t.a=function(e){var t=e.text;return o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement(f,{delay:2e3},o.a.createElement(d,null,o.a.createElement("img",{src:"images/exclamation-mark.svg",style:{height:"20px"}})," ",t))))}},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(6);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.a=function(e){var t=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),l(this,u(n).apply(this,arguments))}var r,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,o.a.Component),r=n,(a=[{key:"componentDidMount",value:function(){this.shouldNavigateAway()}},{key:"componentDidUpdate",value:function(){this.shouldNavigateAway()}},{key:"shouldNavigateAway",value:function(){this.props.token||this.props.history.push("/")}},{key:"render",value:function(){return o.a.createElement(e,this.props)}}])&&c(r.prototype,a),i&&c(r,i),n}();return Object(a.connect)(function(e){return{token:e.auth.token,userId:e.user.userId}})(t)}},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("webpack")},function(e,t){e.exports=require("cookie-parser")},function(e,t){e.exports=require("express-query-boolean")},function(e,t){e.exports=require("cors")},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("socket.io")},function(e,t){e.exports=require("react-dev-utils/openBrowser")},function(e,t){e.exports=require("redux-thunk")},function(e,t){e.exports=require("socket.io-client")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("react-truncate")},function(e,t,n){"use strict";(function(e){var r=n(5),o=n(0),a=n.n(o),i=n(32),c=n(1),l=n.n(c),u=n(3),s=n(12),p=n(36),f=n(33),d=n(13);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=l.a.div.withConfig({displayName:"App__AppContainer",componentId:"s7vf8s-0"})(["margin-right:auto;margin-left:auto;font-family:",";color:",";background-image:linear-gradient(to right bottom,",",",");min-height:100vh;width:100%;display:flex;flex-direction:column;align-items:center;"],u.d.font1,u.c.spotifyWhite,u.c.primaryDark,u.c.primaryLight),k=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,g(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,a.a.Component),n=t,(o=[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(d.a,null),a.a.createElement(r.Switch,null,a.a.createElement(r.Route,{path:"/",exact:!0,component:p.a}),a.a.createElement(v,null,a.a.createElement(r.Route,{path:"/playlist",exact:!0,component:s.a}),a.a.createElement(r.Route,{path:"/search",exact:!0,component:f.a}))))}}])&&m(n.prototype,o),i&&m(n,i),t}();t.a=Object(i.hot)(e)(k)}).call(this,n(37)(e))},function(e,t){e.exports=require("react-hot-loader")},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(6),i=n(4),c=n(11),l=n(17),u=n(14);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,d(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.results,r=e.fetchSearchResults,a=e.fetchSearchResultsError,i=e.addToPlaylist,l=e.trackError;return a?o.a.createElement(c.a,{message:a.displayMessage}):o.a.createElement(u.a,{results:n,fetchSearchResults:r,addToPlaylist:i,trackError:l,loading:t})}}])&&p(n.prototype,r),a&&p(n,a),t}();t.a=Object(l.a)(Object(a.connect)(function(e){return{results:e.search.results,addToPlaylistError:e.playlist.error,fetchSearchResultsError:e.search.error,loading:e.search.loading,trackError:e.search.trackError}},{fetchSearchResults:i.d,addToPlaylist:i.a})(m))},function(e,t){e.exports=require("request")},function(e,t){e.exports=require("mongodb")},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(1),i=n.n(a),c=n(3),l=Object(a.keyframes)(["0%{opacity:0;}10%{transform:translateY(0);opacity:1;}100%{transform:translateY(15px);opacity:0};"]),u=i.a.div.withConfig({displayName:"ScrollingMouse__Scroll",componentId:"sc-1vb2hpf-0"})(["width:3px;height:4px;border-radius:25%;background-color:",";animation-name:",";animation-duration:2.2s;animation-timing-function:cubic-bezier(0.15,0.41,0.69,0.94);animation-iteration-count:infinite;"],c.c.spotifyWhite,l),s=i.a.div.withConfig({displayName:"ScrollingMouse__Wrapper",componentId:"sc-1vb2hpf-1"})(["width:3px;padding:6px 12px;height:28px;border:2px solid #fff;border-radius:25px;opacity:0.75;"]),p=function(){return o.a.createElement(s,null,o.a.createElement(u,null))};function f(){var e=y(["height: 40px;"]);return f=function(){return e},e}function d(){var e=y(["height: 55px;"]);return d=function(){return e},e}function y(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var m=Object(a.keyframes)(["0%{transform:translate(-10px,10px);color:white;}50%{color:grey;}100%{color:rgba(0,0,0,0);}"]),h=i.a.div.withConfig({displayName:"JukeboxAnimation__MusicNote",componentId:"rgcbp1-0"})(["position:absolute;top:-5%;left:70%;font-size:22px;animation:"," 3s infinite ease-out;color:rgba(0,0,0,0);"],m),g=i.a.img.withConfig({displayName:"JukeboxAnimation__Icon",componentId:"rgcbp1-1"})(["height:64px;"," "," transform:translateY(8px);"],c.e.desktop(d()),c.e.phone(f())),b=i.a.span.withConfig({displayName:"JukeboxAnimation__Wrapper",componentId:"rgcbp1-2"})(["position:relative;"]),v=function(){return o.a.createElement(b,null,o.a.createElement(g,{src:"images/jukebox.svg"}),o.a.createElement(h,null,"♫"))};function k(){var e=S(["font-size: 18px;"]);return k=function(){return e},e}function w(){var e=S(["font-size: 16px;"]);return w=function(){return e},e}function _(){var e=S(["font-size: 41px;"]);return _=function(){return e},e}function E(){var e=S(["font-size: 54px;"]);return E=function(){return e},e}function O(){var e=S(["text-align: center;"]);return O=function(){return e},e}function S(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var x=i.a.div.withConfig({displayName:"Title",componentId:"sc-3rhmhh-0"})(["display:flex;flex-direction:column;text-align:justify;-webkit-font-smoothing:antialiased;height:70%;display:flex;justify-content:center;"," "],c.e.phone(O())),j=i.a.h2.withConfig({displayName:"Title__MainHeading",componentId:"sc-3rhmhh-1"})(["text-transform:uppercase;margin:0px;text-shadow:1px 1px 1px #000000;"," ",""],c.e.desktop(E()),c.e.phone(_())),C=i.a.p.withConfig({displayName:"Title__SubHeading",componentId:"sc-3rhmhh-2"})(["text-transform:uppercase;margin:0px;font-size:24px;letter-spacing:10px;text-shadow:1px 1px 1px #000000;padding-left:7px;"," ",""],c.e.desktop(w()),c.e.phone(k())),P=i.a.div.withConfig({displayName:"Title__Container",componentId:"sc-3rhmhh-3"})(["display:flex;flex-direction:column;align-items:center;height:100%;justify-content:space-around;"]),I=function(){return o.a.createElement(P,null,o.a.createElement(x,null,o.a.createElement(j,null,"People's P",o.a.createElement(v,null),"rty Playlist"),o.a.createElement(C,null,"The Ultimate online jukebox experience")),o.a.createElement(p,null))},T=Object(a.keyframes)(["50%{transform:rotateY(-180deg);}100%{transform:rotateY(0deg);}"]),A=Object(a.keyframes)(["50%{transform:rotateY(0);}100%{transform:rotateY(180deg);}"]),N=i.a.div.withConfig({displayName:"RotatingCard__Card",componentId:"sc-1kh3rwb-0"})(["height:100%;width:100%;transition:all 1s linear;position:absolute;top:0;left:0;backface-visibility:hidden;border-radius:3px;overflow:hidden;box-shadow:0 1.5rem 4rem rgba(black,0.15);"]),R=i()(N).withConfig({displayName:"RotatingCard__Back",componentId:"sc-1kh3rwb-1"})(["transform:rotateY(180deg);display:flex;align-items:center;justify-content:center;text-align:center;color:",";background-image:linear-gradient( to right bottom,",","," );animation:"," 3.5s ease-in-out;"],c.c.black,c.c.secondaryDark,c.c.secondaryLight,function(e){return!0===e.card&&A}),L=i()(N).withConfig({displayName:"RotatingCard__Front",componentId:"sc-1kh3rwb-2"})(["display:flex;align-items:center;justify-content:center;background-image:linear-gradient( to right bottom,",","," );animation:"," 3.5s ease-in-out;"],c.c.primaryDark,c.c.primaryLight,function(e){return!0===e.card&&T}),D=i.a.div.withConfig({displayName:"RotatingCard__ContentBlockWrapper",componentId:"sc-1kh3rwb-3"})(["perspective:500px;-moz-perspective:500px;position:relative;height:200px;width:200px;font-size:20px;opacity:10%;font-family:",";&:hover ","{transform:rotateY(-180deg);}&:hover ","{transform:rotateY(0);}"],c.d.font1,L,R),U=i.a.img.withConfig({displayName:"RotatingCard__Icon",componentId:"sc-1kh3rwb-4"})(["height:80px;width:80px;padding:20px 20px;"]),M=function(e){var t=e.image,n=e.text,r=e.displayState,a=e.peekCard;return o.a.createElement(D,{card:a&&r},o.a.createElement(L,{card:a&&r},t&&o.a.createElement(U,{src:t})),o.a.createElement(R,{card:a&&r},n&&o.a.createElement("p",null,n)))};function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var W=i.a.div.withConfig({displayName:"RotatingCards__Container",componentId:"sc-1bo3c2l-0"})(["display:flex;justify-content:center;align-items:center;flex-direction:row;width:100%;height:100%;background-color:rgba(",",0.29);"],c.c.primaryLightRGBA),Y=i.a.div.withConfig({displayName:"RotatingCards__BlocksWrapper",componentId:"sc-1bo3c2l-1"})(["display:flex;justify-content:space-around;flex-wrap:wrap;align-items:center;width:90%;height:100%;"]),G=function(e){function t(e){var n,r,a,i,c,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=z(t).call(this,e),n=!a||"object"!==F(a)&&"function"!=typeof a?B(r):a,i=B(n),l=function(e){window.scrollY>n.myRef.current.offsetTop-200?n.setState({cardOpen:!0}):n.setState({cardOpen:!1})},(c="listenScrollEvent")in i?Object.defineProperty(i,c,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[c]=l,n.myRef=o.a.createRef(),n.state={cardOpen:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,o.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.listenScrollEvent)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.listenScrollEvent)}},{key:"render",value:function(){var e=this;return o.a.createElement(W,{ref:this.myRef},o.a.createElement(Y,null,[{image:"images/disc.svg",text:"Create your own playlist",peekCard:!0},{image:"images/thumbs_up.svg",text:"Upvote to move tracks up the playlist"},{image:"images/thumbs_down.svg",text:"Downvote to move tracks down the playlist"},{image:"images/sad.svg",text:"5 downvotes will remove the track from the playlist"}].map(function(t){return o.a.createElement(M,{image:t.image,text:t.text,displayState:e.state.cardOpen,peekCard:t.peekCard,key:t.text})})))}}])&&q(n.prototype,r),a&&q(n,a),t}(),H=i.a.img.withConfig({displayName:"SignIn__Icon",componentId:"hi5g38-0"})(["height:60px;width:60px;padding:20px 20px;&:hover{transform:scale(1.5);transition-duration:0.3s;}&:active{transform:scale(1.1);}"]),K=i.a.div.withConfig({displayName:"SignIn__Wrapper",componentId:"hi5g38-1"})(["display:flex;justify-content:center;align-items:center;flex-direction:row;height:500px;width:100%;font-size:24px;"]),$=function(){return o.a.createElement(K,null,o.a.createElement("p",null,"Log in with Spotify to get started"),o.a.createElement("a",{href:"/login"},o.a.createElement(H,{src:"/images/log-in.svg"})))};function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t){return!t||"object"!==J(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var te=i.a.div.withConfig({displayName:"Homepage__Wrap",componentId:"sc-1lc7ypn-0"})(["height:100%;font-family:",";font-size:44px;color:",";"],c.d.font1,c.c.spotifyWhite),ne=i.a.div.withConfig({displayName:"Homepage__Parallax",componentId:"sc-1lc7ypn-1"})(["background-image:linear-gradient(to right bottom,#212121,#000000);height:85vh;background-attachment:fixed;background-position:center;background-repeat:no-repeat;background-size:cover;display:flex;justify-content:center;align-items:center;"]),re=i.a.div.withConfig({displayName:"Homepage__Static",componentId:"sc-1lc7ypn-2"})(["height:80vh;font-size:36px;width:100%;"]),oe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Q(this,Z(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){return o.a.createElement(te,null,o.a.createElement(ne,null,o.a.createElement(I,null)),o.a.createElement(ne,null,o.a.createElement(re,null,o.a.createElement(G,null))),o.a.createElement(ne,null,o.a.createElement($,null)))}}])&&X(n.prototype,r),a&&X(n,a),t}();t.a=oe},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=require("dotenv")},function(e,t,n){(function(t){var r=n(40),o=n(41),a=n(20);e.exports={mode:"development",entry:["webpack-hot-middleware/client?reload=true&overlay=$true","./src/client.js"],output:{path:r.resolve(t,"public"),filename:"[name].bundle.js",publicPath:"/"},module:{rules:[{test:/\.(js|jsx)$/,use:"babel-loader"},{test:/\.(png|jpg|svg)$/,use:[{loader:"file-loader"}]}]},plugins:[new a.HotModuleReplacementPlugin,new o([{from:"static/img",to:"images"}])],node:{fs:"empty",vm:"empty",net:"empty",tls:"empty"}}}).call(this,"/")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("copy-webpack-plugin")},function(e,t){e.exports=require("webpack-dev-middleware")},function(e,t){e.exports=require("webpack-hot-middleware")},function(e,t,n){"use strict";n.r(t);var r=n(21),o=n.n(r),a=n(18),i=n.n(a),c=n(19),l=n.n(c),u=n(22),s=n.n(u),p=n(23),f=n.n(p),d=n(24),y=n.n(d),m=n(25),h=n.n(m),g=n(26),b=n.n(g),v=n(27),k=n.n(v),w=n(9),_=n(2),E=n(8);function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){S(e,t,n[t])})}return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x={removedPlaylist:[],tracks:[],lockedTrack:[],error:null,loading:!1,trackError:null},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0,n=Object(E.cloneDeep)(e.tracks),r=Object(E.cloneDeep)(e.lockedTrack),o=Object(E.cloneDeep)(e.removedPlaylist);switch(console.log("actoin",t.type),t.type){case _.i:return O({},e,{loading:!0});case _.k:var a=t.payload.response.data.tracks;return n=[],r=[],o=[],a.forEach(function(e){e.removed?o.push(e):e.locked&&!e.removed?r.push(e):n.push(e)}),O({},e,{loading:!1,tracks:n,lockedTrack:r,removedPlaylist:o});case _.j:return console.log(t),O({},e,{loading:!1,error:t.payload.error});case _.f:return n[t.payload.position].loading=!0,O({},e,{tracks:n});case _.h:return n[t.payload.position].loading=!1,n[t.payload.position].error=null,n.splice(t.payload.position,1),O({},e,{tracks:n});case _.g:return n[t.payload.position].loading=!1,n[t.payload.position].error={status:t.payload.error.response.data.error.status,message:t.payload.error.response.data.error.message,displayMessage:"could not update track at this time"},O({},e,{tracks:n});case _.d:return n.splice(t.payload.position,0,t.payload.track),O({},e,{tracks:n,trackError:null});case _.J:return n[t.payload.position].loading=!0,O({},e,{tracks:n,trackError:null});case _.L:return n.splice(t.payload.position,1),n.splice(t.payload.newPosition,0,t.payload.track),n[t.payload.newPosition].loading=!1,O({},e,{tracks:n,trackError:null});case _.K:return n[t.payload.position].loading=!1,O({},e,{tracks:n,trackError:{position:t.payload.position,error:{status:t.payload.error.response.data.error.status,message:t.payload.error.response.data.error.message,displayMessage:"could not update track at this time"}}});case"UPVOTE_LIMIT_EXCEEDED":return O({},e,{trackError:{position:t.payload,error:{status:"",message:"",displayMessage:"cannot upvote more than 3 times on a track!"}}});case"DOWNVOTE_LIMIT_EXCEEDED":var i={position:t.payload,error:{status:"",message:"",displayMessage:"cannot downvote more than 2 times on a track!"}};return O({},e,{trackError:i});case"UPDATE_CURRENT_TRACK_SUCCESS":return r.length>0&&(r[0].removed=!0,o.push(r[0]),r.pop()),n.length>0&&(r=[n[0]],n.shift()),r.length>0&&(r[0].locked=!0),O({},e,{lockedTrack:r,tracks:n,removedPlaylist:o,trackError:null});case"START_SESSION_SUCCESS":return r.length>0&&(r[0].removed=!0,o.push(r[0])),(r=[n[0]]).length>0&&(r[0].locked=!0),n.shift(),O({},e,{lockedTrack:r,tracks:n,removedPlaylist:o});default:return e}};function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){P(e,t,n[t])})}return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I={loading:!1,error:null,playing:!1,currentPlayingTrack:"",currentTrack:{uri:"",artist:"",name:""},progress_ms:null},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.A:return C({},e,{loading:!0});case _.C:return C({},e,{playing:!0,loading:!1,error:null});case _.B:return C({},e,{loading:!1,playing:!1,error:{status:t.payload.error.response.data.error.status,message:t.payload.error.response.data.error.message,displayMessage:"Couldn't find active device, make sure you have spotify open"}});case _.z:return C({},e,{playing:!1});case _.t:return t.payload.response.data.item?C({},e,{progress_ms:t.payload.response.data.progress_ms,currentTrack:{uri:t.payload.response.data.item.uri,artist:t.payload.response.data.item.artists[0].name,name:t.payload.response.data.item.name}}):C({},e);default:return e}};function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){N(e,t,n[t])})}return e}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R={results:[],loading:!1,error:null,trackError:null},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0,n=Object(E.cloneDeep)(e.results);switch(t.type){case _.l:return A({},e,{loading:!0});case _.n:return{results:t.payload.response.data.tracks.items,loading:!1,error:null};case _.m:return A({},e,{loading:!1,error:{status:t.payload.error.response.data.error.status,message:t.payload.error.response.data.error.message,displayMessage:"Fetch search results failed. Try logging in again."}});case _.e:return{results:[],loading:!1,error:null};case _.a:return n[t.payload.positionInSearch].loading=!0,A({},e,{results:n,trackError:null});case _.c:var r=t.payload.track;return n[t.payload.positionInSearch].loading=!1,A({},e,{trackError:{position:t.payload.positionInSearch,error:{status:t.payload.error.response.data.error.status,message:t.payload.error.response.data.error.message,displayMessage:"Could not add track - ".concat(r.artist," - ").concat(r.name," to playlist at this time")}}});case _.b:return n[t.payload].added=!1,A({},e,{trackError:{position:t.payload,error:{status:null,message:null,displayMessage:"Can't add a track that is already on the playlist!"}}});case _.d:return n.length>0&&(n[t.payload.positionInSearch].loading=!1,n[t.payload.positionInSearch].added=!0),A({},e,{results:n});default:return e}};function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){U(e,t,n[t])})}return e}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M={loading:!1,sessionStarted:!1,error:null},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.D:return D({},e,{loading:!0});case _.F:return{loading:!1,sessionStarted:!0,error:null};case _.E:return D({},e,{loading:!1,error:{status:t.payload.error.response.status,message:t.payload.error.message,displayMessage:"could not start session at this time"}});default:return e}};function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){z(e,t,n[t])})}return e}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B={token:"",error:null},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.v:return q({},e,{token:t.payload,error:null});case _.u:return q({},e,{error:t.payload.error});case _.w:return q({},e,{token:""});default:return e}};function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Y(e,t,n[t])})}return e}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G={userId:"",loading:!1,error:null},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.o:return W({},e,{loading:!0});case _.q:return W({},e,{loading:!1,userId:t.payload.response.data.display_name});case _.p:return W({},e,{loading:!1,error:{status:t.payload.error.response.data.error.status,message:t.payload.error.response.data.error.message,displayMessage:"Could not get current users profile, try logging in again"}});default:return e}};function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){$(e,t,n[t])})}return e}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var J={userId:""},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ASSIGN_APP_USER":return K({},e,{userId:t.payload});default:return e}},Q=Object(w.combineReducers)({auth:V,user:H,appUser:X,playlist:j,playback:T,search:L,session:F}),Z=n(28),ee=n.n(Z),te=function(e){var t=e.dispatch,n=ee()("/");return n.on("message",function(e){t(e)}),function(e){return function(t){if("WS"!==t.handler)return e(t);n.send({type:t.type,payload:t.payload})}}},ne=n(10),re=function(e){var t=[k.a,ne.a,te];return w.applyMiddleware.apply(void 0,t)(w.createStore)(Q,e)},oe=n(0),ae=n.n(oe),ie=n(6),ce=n(29),le=n(5),ue=n(1),se=n(12),pe=n(13),fe=n(14),de=[{path:"/playlist",component:se.a,exact:!0},{path:"/search",component:fe.a,exact:!0},{path:"*",component:pe.a,exact:!0}],ye=n(31),me=n(34),he=n.n(me),ge=n(4);n(38).config();var be=process.env.clientID,ve=process.env.client_secret,ke="spotify_auth_state",we=process.env.REDIRECT_URI||"http://localhost:5000/callback",_e=function(e,t){var n=Math.random().toString(36).substring(2,16);t.cookie(ke,n),t.redirect(function(e){return"".concat("https://accounts.spotify.com/authorize","?")+"client_id=".concat(be)+"&response_type=".concat("code")+"&redirect_uri=".concat(we)+"&scope=".concat(["user-read-private","user-modify-playback-state","playlist-modify-public","playlist-modify-private","streaming","user-read-email","user-read-currently-playing","user-read-playback-state"].join("%20"))+"&state=".concat(e)+"&show_dialog=true"}(n))},Ee=function(e,t){var n=e.query,r=n.code,o=n.state,a=e.cookies[ke];if(o&&o===a){t.clearCookie(ke);var i={url:"https://accounts.spotify.com/api/token",form:{code:r,redirect_uri:we,grant_type:"authorization_code"},headers:{Authorization:"Basic "+new Buffer(be+":"+ve).toString("base64")},json:!0};he.a.post(i,function(e,n,r){if(e||200!==n.statusCode)t.redirect("/LogInFailure");else{var o=r.access_token,a=r.refresh_token;t.cookie("spotifyAccessToken",o),t.cookie("spotifyRefreshToken",a),t.redirect("/")}})}else t.redirect("/LogInFailure")},Oe=function(e,t,n){t.cookie("userId",function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=t.length,r=0;r<10;r++)e+=t.charAt(Math.floor(Math.random()*n));return e}()),t.redirect("/")},Se=n(35);function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){je(e,t,n[t])})}return e}function je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ce=n.n(Se).a.MongoClient,Pe=process.env.MONGODB_URI||"mongodb://localhost/peoples-party-playlist",Ie=process.env.DBASE||"peoples-party-playlist",Te=function(e,t,n){var r={uri:e.params.id};Ce.connect(Pe,function(e,n){if(e)throw e;n.db(Ie).collection("tracks").deleteOne(r,function(e,r){if(e)throw e;t.sendStatus(202),console.log("1 document deleted"),n.close()})})},Ae=function(e,t,n){var r=e.body.uri,o=e.body.name,a=e.body.artist,i=e.body.updatedAt;Ce.connect(Pe,function(e,n){if(e)throw e;var c=n.db(Ie),l={uri:r,votes:0,users:[],name:o,artist:a,updatedAt:i||(new Date).toISOString(),removed:!1,locked:!1,upVoters:{},downVoters:{}};c.collection("tracks").insertOne(l,function(e,r){if(e)throw e;t.sendStatus(201),console.log("1 document inserted"),n.close()})})},Ne=function(e,t,n){var r=e.body.update,o=e.params.id;Ce.connect(Pe,function(e,n){if(e)throw e;var a=n.db(Ie),i={uri:o};a.collection("tracks").findAndModify(i,[["_id","asc"]],r,{new:!0},function(e,r){if(e)throw e;t.json({track:xe({},r.value)}),n.close()})})},Re=function(e,t,n){var r=e.query||null;Ce.connect(Pe,function(e,n){if(e)throw e;n.db(Ie).collection("tracks").find(r).sort({votes:-1,updatedAt:1}).toArray(function(e,r){if(e)throw e;t.json({tracks:r}),n.close()})})},Le=i()(),De=y.a.createServer(Le);Le.use(f()()),Le.use(l.a.urlencoded()),Le.use(l.a.json({type:"*/*"})),Le.use(s()()),Le.use(o()()),Le.use(i.a.static("public"));var Ue,Me,Fe,qe,ze,Be,Ve,We,Ye,Ge=re();Ue=n(20),Me=n(39),Fe=Ue(Me),qe=n(42),ze=n(43),Be=qe(Fe,{publicPath:Me.output.publicPath,headers:{"Access-Control-Allow-Origin":"*"},hot:!0,quiet:!0,noInfo:!0,stats:"errors-only",logLevel:"silent",serverSideRender:!0}),Ve=ze(Fe,{stats:"errors-only",logLevel:"silent",log:!1,quiet:!0,noInfo:!0}),Le.use(Be),Le.use(Ve),Ye=Ge,(We=Le).get("/login",_e),We.get("/log-out",function(e){return function(t,n,r){e.dispatch(Object(ge.i)()),n.clearCookie("spotifyAccessToken"),n.clearCookie("spotifyRefreshToken"),n.redirect("https://accounts.spotify.com/logout")}}(Ye)),We.get("/change-user",_e),We.get("/LogInFailure",function(e){return function(t,n,r){e.dispatch(Object(ge.g)("er")),n.redirect("/")}}(Ye)),We.get("/callback",Ee),We.get("/invite",Oe),We.get("/api/v1/playlist/tracks",Re),We.delete("/api/v1/playlist/tracks/:id",Te),We.post("/api/v1/playlist/tracks",Ae),We.patch("/api/v1/playlist/tracks/:id",Ne),We.get("/*",function(e,t){var n={},r=e.cookies.spotifyAccessToken;r&&Ye.dispatch(Object(ge.h)(r));var o=e.cookies.userId;o&&Ye.dispatch(Object(ge.b)(o));var a=new ue.ServerStyleSheet,i=de.filter(function(t){return Object(le.matchPath)(e.path,t)}).map(function(e){return e.component}).filter(function(e){return e.serverFetch}).map(function(e){return Ye.dispatch(e.serverFetch())});Promise.all(i).then(function(){var r=ae.a.createElement(ie.Provider,{store:Ye},ae.a.createElement(le.StaticRouter,{context:n,location:e.url},ae.a.createElement(ye.a,null))),o=Object(ce.renderToString)(a.collectStyles(r)),i=Ye.getState(),c=a.getStyleTags();t.writeHead(200,{"Content-Type":"text/html"}),t.end(function(e,t,n){return'\n      <!DOCTYPE html>\n      <html>\n      <head>\n          <meta charset="utf-8">\n          <meta name="viewport" content="width=device-width">\n          <title>People\'s Party Playlist</title>\n          '.concat(t,'\n          <link href="https://fonts.googleapis.com/css?family=Righteous" rel="stylesheet">\n          <link href="https://fonts.googleapis.com/css?family=Karla" rel="stylesheet">\n          <link rel="shortcut icon" href="/images/favicon.ico">\n      </head>\n      <script src="https://unpkg.com/ionicons@4.5.5/dist/ionicons.js"><\/script>\n\n      <body style="margin:0;">\n        <div id="app">').concat(e,"</div>\n        <script>\n          window.REDUX_DATA = ").concat(JSON.stringify(n),'\n        <\/script>\n        <script type="text/javascript" src="/main.bundle.js"><\/script>\n      </body>\n      </html>\n  ')}(o,c,i))})});var He=h()(De);He.on("connection",function(e){console.log("User connected"),e.on("message",function(e){console.log("Server received message: ",e),He.sockets.emit("message",e)}),e.on("disconnect",function(){console.log("user disconnected")})});De.listen(8080,"localhost",function(e){if(e)console.error(e);else{var t="http://".concat("localhost",":").concat(8080);b()(t)}})}]);